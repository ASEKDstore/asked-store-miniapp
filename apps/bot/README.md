# ASKED Store Bot

Telegram-–±–æ—Ç –¥–ª—è ASKED Store –Ω–∞ Telegraf + TypeScript.

## –í–µ—Ä—Å–∏—è

**v0.2.1** ‚Äî Bot: custom emoji support (capture IDs + templates)

**v0.2.0** ‚Äî Telegram bot: /start + —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ –º–µ–Ω—é

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
cd apps/bot
npm install
npm run dev
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `apps/bot/` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Render:

```env
BOT_TOKEN=8211081274:AAHIwp3TWNwbeWbaNtUesAKcMkZA8aUv3Yo
WELCOME_VIDEO_URL=https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4
TELEGRAM_CHANNEL_URL=https://t.me/asked_store
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `WELCOME_VIDEO_URL` ‚Äî URL –≤–∏–¥–µ–æ –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ)
- `TELEGRAM_CHANNEL_URL` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `https://t.me/asked_store`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
apps/bot/
  src/
    bot.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
    config.ts           # –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    handlers/
      start.ts          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
      menu.ts           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
    tools/
      emojiCapture.ts   # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ ID –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–º–æ–¥–∑–∏
    ui/
      emojiMap.ts       # –°–ª–æ–≤–∞—Ä—å custom_emoji_id
      sendWithCustomEmoji.ts  # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —ç–º–æ–¥–∑–∏
      statusMessages.ts # –®–∞–±–ª–æ–Ω—ã —Å—Ç–∞—Ç—É—Å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  package.json
  tsconfig.json
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–º–∞–Ω–¥–∞ /start

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `/start` –±–æ—Ç:
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, TODO: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend)
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å:
3. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —ç–º–æ–¥–∑–∏ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —ç–º–æ–¥–∑–∏

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–º–∞–π–ª—ã Telegram Premium.

#### –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

1. **–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º –∑–∞—Ö–≤–∞—Ç–∞ ID:**
   ```bash
   EMOJI_CAPTURE=1 npm run dev
   ```

2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω—É–∂–Ω—ã–º–∏ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —ç–º–æ–¥–∑–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
   - –í—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–º–æ–¥–∑–∏ –∏–∑ Premium-–Ω–∞–±–æ—Ä–∞
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —ç—Ç–∏–º —ç–º–æ–¥–∑–∏

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `custom_emoji_id` –∏–∑ –∫–æ–Ω—Å–æ–ª–∏:**
   ```
   [EMOJI] id=5432109876543210123 offset=0 length=1 text="–ó–∞–ø—É—Å–∫–∞—é ASKED LAB üü¢"
   üí° –°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ—Ç ID –≤ emojiMap.ts
   ```

4. **–í—Å—Ç–∞–≤—å—Ç–µ ID –≤ `src/ui/emojiMap.ts`:**
   ```typescript
   export const EMOJI = {
     gear: '5432109876543210123',  // ‚Üê –≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞
     green: '1234567890123456789', // ‚Üê –∏ —Å—é–¥–∞
     // ...
   }
   ```

5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –±–µ–∑ —Ñ–ª–∞–≥–∞ `EMOJI_CAPTURE`:**
   ```bash
   npm run dev
   ```

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–µ–º–æ-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —ç–º–æ–¥–∑–∏

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:

```typescript
import { status } from './ui/statusMessages.js'

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
await status.appStarting(ctx.telegram, ctx.chat.id)
// –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è {gear}" ‚Üí —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —ç–º–æ–¥–∑–∏

// –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—É
import { sendWithEmoji } from './ui/sendWithCustomEmoji.js'
await sendWithEmoji(ctx.telegram, ctx.chat.id, '–ó–∞–ø—É—Å–∫–∞—é ASKED LAB {green}')
```

#### Fallback:

–ï—Å–ª–∏ `custom_emoji_id` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –≤ `emojiMap.ts`, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–µ —é–Ω–∏–∫–æ–¥-—ç–º–æ–¥–∑–∏:
- `{gear}` ‚Üí ‚öôÔ∏è
- `{green}` ‚Üí üü¢
- `{dots}` ‚Üí ‚è≥
- `{ok}` ‚Üí ‚úÖ
- `{heart}` ‚Üí ‚ù§Ô∏è

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–º–∞–Ω–¥–∞ /start

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `/start` –±–æ—Ç:
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, TODO: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend)
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å:
   - –í–∏–¥–µ–æ —Å–≤–µ—Ä—Ö—É (–∏–∑ `WELCOME_VIDEO_URL` –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)
   - –¢–µ–∫—Å—Ç–æ–≤—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ)
   - Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π —Å –∫–Ω–æ–ø–∫–∞–º–∏ –º–µ–Ω—é

### –ú–µ–Ω—é

- **üõí –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- **üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- **üß™ ASKED LAB** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- **üì¢ –ù–∞—à —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª** ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª

## –°–∫—Ä–∏–ø—Ç—ã

- `npm run dev` ‚Äî –∑–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload (tsx watch)
- `npm run build` ‚Äî —Å–±–æ—Ä–∫–∞ TypeScript –≤ JavaScript
- `npm start` ‚Äî –∑–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏)

## TODO

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–ú–æ–∏ –∑–∞–∫–∞–∑—ã"
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "ASKED LAB"
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Web App
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–∏–¥–µ–æ-—Ñ–∞–π–ª–∞ –≤ `assets/welcome.mp4`

