# Changelog — ASKED Store

## 2.6.0 — Telegram Mini App Edition

- Фронтенд адаптирован под запуск внутри Telegram WebApp:
  - инициализация через Telegram WebApp SDK, получение пользователя и темы;
  - авто-расширение на весь экран и установка цвета хедера;
  - fallback-страница, если открыть проект вне Telegram.
- Layout переведён на mobile-first с учётом safe-area (жесты, нижняя панель).
- Поддержан Telegram BackButton (возврат на главную из внутренних экранов).

## 2.4.0 — Admin Power Pack

- Добавлена система ролей пользователей (user / manager / admin) на backend.
- Реализован список пользователей и управление ролями в админке.
- Добавлен файл-менеджер:
  - upload изображений через /admin/files
  - список файлов и удаление
  - доступ к файлам по URL /files/...
- Админская статистика обновляется в реальном времени (пуллинг каждые 10 сек).
- Введён общий helper Telegram-уведомлений для админов (новые заказы, изменения ролей, загрузка/удаление файлов).
- Пункт "Admin" в бургер-меню видит только владелец (по Telegram ID).


## 2.3.0 — Admin токены + кнопка в меню

- Добавлены переменные окружения для админ-панели:
  - backend: ADMIN_TOKEN
  - frontend: VITE_ADMIN_TOKEN
- Если токен не задан, админка показывает аккуратную заглушку.
- В бургер-меню добавлен пункт "Admin", который ведёт на `/admin`
  и отображается только когда VITE_ADMIN_TOKEN задан.


## 2.2.0 — Активация админ-панели

- Созданы .env файлы для backend и frontend с ADMIN_TOKEN
- Обновлена проверка admin-токена на backend (поддержка заголовка `x-admin-token`)
- Добавлен тестовый роут `/admin/ping` для проверки доступа
- Обновлён AdminScreen для проверки токена и использования `x-admin-token`
- Создана функция `adminFetch` в `webapp/src/lib/api.ts` для удобной работы с admin API
- Добавлена документация по настройке админки в README.md
- Создан файл `docs/render-admin-setup.md` с инструкциями для деплоя на Render


## 2.1.0 — Новый загрузочный экран

- Обновлён SplashScreen под фирменный стиль ASKED:
  - облако светящихся плашек с кодами (DROP, ACCESS, INSIDE, ASKED)
  - неоновый логотип ASKED
  - анимированный progress-bar и надпись LOADING…
  - внизу отображается версия приложения и подпись
    "разработано командой ASKED · 2025"


## 2.0.0 — Live content + Admin

- Каталог и главная страница получают данные с backend:
  - /catalog — товары с описанием, размерами и фотографиями
  - /home — баннеры, топ товары, акции, галерея, соцсети
- Добавлена базовая админ-панель (`/admin`):
  - вкладка "Товары" — просмотр и добавление позиций каталога
  - вкладка "Главная" — правка баннеров, акций, галереи и соцсетей
  - вкладка "Промокоды" — генерация limited-кодов
  - вкладка "Статистика" — количество заказов, выручка, уникальные пользователи, топ товаров
- Все admin-эндпоинты защищены токеном ADMIN_TOKEN
- Проект готов к дальнейшей прокачке (подключение реальной БД и полноценной CMS)


## 1.8.0 — Home hub + dynamic data

- Добавлен endpoint `/home` на backend:
  - отдаёт баннеры, топ товары, акции, галерею и соцсети
  - топ товары формируются по статистике заказов (falls back на дефолтные)
- Главный экран:
  - баннеры, топ товары, акции, галерея и соцсети подгружаются с backend
  - сохранён блок статуса текущего заказа


## 1.7.0 — Home hub

- Обновлён главный экран:
  - добавлены баннеры с промо-дропами (горизонтальная карусель)
  - крупная кнопка "Открыть каталог"
  - блок "Топ товары" в виде карусели из карточек
  - блок "Акции и условия"
  - галерея превью
  - блок с соцсетями бренда
- Сохранён блок отображения статуса текущего заказа


## 1.6.0 — Checkout + Orders

- Добавлен экран оформления заказа (`/checkout`) с формой:
  - ФИО, телефон, адрес, способ доставки, комментарий
- Заказ уходит на backend:
  - присваивается номер вида `00001`
  - сохраняется в in-memory массиве
  - при наличии `TELEGRAM_BOT_TOKEN` и `TELEGRAM_MOD_CHAT_ID` отправляется уведомление модератору в Telegram
- Добавлены статусы заказа: `processing`, `packing`, `delivery`, `delivered`
  - эндпоинт PATCH `/orders/:id/status` для будущей админки
- На главной отображается статус последнего заказа текущего Telegram-пользователя:
  - пример: "Заказ №00001 — доставляется"
- Корзина получила кнопку "Оформить заказ", ведущую на `/checkout`


## 1.5.0 — Product Details Sheet

- Карточки товаров раскрываются в детальный просмотр (bottom-sheet / fullscreen)
- Внутри: название, цена, тег, описание, выбор размера
- Кнопки "Купить сейчас" и "Добавить в корзину"
- Размеры и описания добавлены к заглушкам
- Стиль под тёмный Telegram Mini App и ASKED


## 1.4.2 — Catalog Pro

- Обновлён экран каталога:
  - 20 заглушечных товаров с тегами (limited / drop / new)
  - сетка 2–3 колонки, mobile-first
  - поиск, фильтры по категориям и тегам, сортировка по цене
- Добавлены кнопки "В корзину" с интеграцией CartContext
- Добавлена skeleton-загрузка (shimmer) при смене фильтров/поиска
- Лёгкая адаптация каталога под тёмную Telegram-тему


## 1.4.1 — Catalog placeholders

- Добавлены 20 карточек-заглушек товаров
- Новая сетка каталога: 3 карточки в ширину (mobile-first)
- Подготовка к загрузке настоящих данных с backend


## 1.4.0 — Missing pages wired

- Добавлены недостающие страницы из бургер-меню:
  - `/about` — о бренде ASKED
  - `/certs` — превью раздела сертификатов
  - `/help` — базовая страница помощи и контактов
  - `/team` — страница "Хочу в команду"
- Обновлён бургер-меню:
  - кнопки теперь ведут на реальные роуты
  - закрытие меню после выбора раздела
- Обновлён App.tsx для поддержки новых маршрутов


## 1.3.0 — Limited Pass Engine + Telegram Mini App

- Добавлен backend-чекер limited-пропусков (`POST /limited/check`) с сериями, партиями, cardId и tier
- Экран Limited переписан в format "Limited Pass Engine":
  - flip-карта (front/back) с glow-эффектами
  - NFT-like именной пропуск на обороте
  - список секретных дропов (online / soon)
  - "магнитный ключ" для активации промокода
- Улучшена интеграция с Telegram Mini App:
  - расширенный `useTelegram` с themeParams и colorScheme
  - установка цветов через CSS-переменные (`--tg-bg-color`, `--tg-text-color`)
  - компонент `TelegramBackSync`, который синхронизирует Telegram BackButton с роутами
- Подготовка к дальнейшему связыванию limited-пропусков с Telegram-пользователями


## 1.2.0 — Limited-доступ и техработы

- Заменён термин VIP на Limited:
  - обновлён bottom navigation (вкладка Limited)
  - маршрут `/vip` заменён на `/limited`
  - экран доступа переработан под формат виртуальной карточки
- Добавлен экран Limited-доступа с визуалом "вирт-карты"
- Добавлен экран "Технические работы" (`/maintenance`) с понятным текстом и кнопками
- Обновлены маршруты в App.tsx, сохранён 404-экран


## 1.1.0 — UI upgrade: splash, 404, transitions

- Обновлён фирменный загрузочный экран:
  - промокоды "собирают" лого ASKED
  - добавлен статус-бар загрузки
- Добавлен экран 404 / Not Found с кнопкой возврата на главную
- Добавлен мягкий fade-in переход между экранами (RootLayout)
- Добавлены лёгкие анимации появления карточек
- Подготовка к дальнейшим визуальным фичам


## 1.0.1 — Updated Splash Screen

- Полностью обновлён фирменный загрузочный экран ASKED.
- Добавлены glow-эффекты, новая анимация и улучшенный визуальный стиль.

## 1.0.0 — initial clean monorepo

- Создана новая монорепа `asked-store/`
- Добавлен фронт `webapp/` (Vite + React + TypeScript + Tailwind + React Router)
- Добавлен backend-каркас `backend/` (Node + Express, TypeScript)
- Добавлен пакет `shared/` под общие типы и утилиты
- Реализованы ключевые экраны и UI:
  - Загрузочный экран (Splash)
  - Главный экран с категориями и дропами
  - Каталог (поиск + фильтры)
  - Корзина с расчётом итогов
  - Отзывы (UI + форма добавления)
  - VIP-экран-заглушка
  - Авторизация через Telegram Mini App (`initDataUnsafe`)
  - Тёмный UI в стиле Telegram Mini Apps
  - Bottom Navigation (Главная · Каталог · VIP · Корзина)
  - Бургер-меню (О нас, Сертификаты, Помощь, Хочу в команду)
- Добавлена папка `fixes/` для GPT-черновиков
- Настроен `render.yaml` для автодеплоя на Render
- Настроен простой CI (GitHub Actions) для сборки

